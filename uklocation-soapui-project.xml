<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="c4fb1670-4e2b-4544-9c9b-bc92db560908" activeEnvironment="Default" name="uklocation" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="fb351a79-df71-4ac0-bb4b-7b8118474b49" wsaVersion="NONE" name="UKLocationSoap" type="wsdl" bindingName="{http://www.webserviceX.NET}UKLocationSoap" soapVersion="1_1" anonymous="optional" definition="http://www.webservicex.net/uklocation.asmx?WSDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint></con:endpoints><con:operation id="4b098374-d8eb-4b63-b5b4-b300181b73f8" isOneWay="false" action="http://www.webserviceX.NET/GetUKLocationByCounty" name="GetUKLocationByCounty" bindingOperationName="GetUKLocationByCounty" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="9d6ab712-dd55-46a6-8ea5-e31356f32994" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:GetUKLocationByCounty>
         <!--Optional:-->
         <web:County>?</web:County>
      </web:GetUKLocationByCounty>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.webserviceX.NET/GetUKLocationByCounty"/></con:call></con:operation><con:operation id="6ff1bc2c-cd7f-4e91-a414-275ef0e2af19" isOneWay="false" action="http://www.webserviceX.NET/GetUKLocationByPostCode" name="GetUKLocationByPostCode" bindingOperationName="GetUKLocationByPostCode" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4b6e85f0-ea0b-459c-aef2-d536ecb6275b" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:GetUKLocationByPostCode>
         <!--Optional:-->
         <web:PostCode>?</web:PostCode>
      </web:GetUKLocationByPostCode>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.webserviceX.NET/GetUKLocationByPostCode"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="22f01085-15cf-4a5b-89bb-e9f034927c25" isOneWay="false" action="http://www.webserviceX.NET/GetUKLocationByTown" name="GetUKLocationByTown" bindingOperationName="GetUKLocationByTown" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="b3163556-281c-4eb5-bf86-281a2257a191" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:GetUKLocationByTown>
         <!--Optional:-->
         <web:Town></web:Town>
      </web:GetUKLocationByTown>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.webserviceX.NET/GetUKLocationByTown"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="5730aeb5-16e4-4212-abd5-d124673bbb14" isOneWay="false" action="http://www.webserviceX.NET/ValidateUKAddress" name="ValidateUKAddress" bindingOperationName="ValidateUKAddress" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="57fa15f2-0298-4b2f-9512-b27c9e9e4160" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:ValidateUKAddress>
         <!--Optional:-->
         <web:Town>?</web:Town>
         <!--Optional:-->
         <web:County>?</web:County>
         <!--Optional:-->
         <web:PostCode>?</web:PostCode>
      </web:ValidateUKAddress>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.webserviceX.NET/ValidateUKAddress"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:testSuite id="98a5d575-8d4c-4e35-8272-3f90c89578f2" name="UKLocation-TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="0324239f-5271-4a0f-8fe9-ffc4694d9e67" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="UKLocation-TestCase" searchProperties="true"><con:settings/><con:testStep type="request" id="132ae8a2-bee8-4b4a-a485-f7fe980be5a2" name="GetUKLocationByCounty"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>UKLocationSoap</con:interface><con:operation>GetUKLocationByCounty</con:operation><con:request name="GetUKLocationByCounty" id="151c2eea-372d-4fec-b04f-c7fad7d78b70"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:GetUKLocationByCounty>
         <!--Optional:-->
         <web:County>oxford</web:County>
      </web:GetUKLocationByCounty>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Valid HTTP Status Codes" id="6994dd7f-73a1-47be-a5b9-f9e47c7ce238" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5842d5d5-3a7a-49ad-a952-2810a6412543" name="Contains Oxfordshire"><con:configuration><token>Oxfordshire</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="http://www.webserviceX.NET/GetUKLocationByCounty" mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="properties" name="PostCode" id="2dfb70d6-9ac7-4f15-8747-47a7daaadbca"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>postCode</con:name><con:value>OX15</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="GetUKLocationByPostCode" id="006bc6b0-5666-4e62-873b-b48fcb4581a7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>UKLocationSoap</con:interface><con:operation>GetUKLocationByPostCode</con:operation><con:request name="GetUKLocationByPostCode" id="d84ca4eb-6951-46ed-a4b7-afa65310a1ae"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:GetUKLocationByPostCode>
         <web:PostCode>${PostCode#postCode}</web:PostCode>
      </web:GetUKLocationByPostCode>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3e5f82cb-dce3-4f65-873d-46584ed1c976"/><con:assertion type="Valid HTTP Status Codes" id="591d6e4a-eaab-47d0-a5e7-ca4d414053d0" name="Valid HTTP Status Codes"><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="da52f9df-b00f-44a8-8436-f8ae010e95d7" name="Contains OX15"><con:configuration><token>OX15</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="GetUKLocationByTown_ProjectLevel" id="ea6d0dfb-9f95-492d-9cdb-5a190e43ac6e"><con:settings/><con:config><script>	import groovy.util.XmlSlurper

	def responseContent = testRunner.testCase.getTestStepByName("GetUKLocationByPostCode").getPropertyValue("Response")
	log.info(responseContent)


	def xmlResponse = new XmlSlurper().parseText(responseContent)
	def slurperResponse = new XmlSlurper().parseText(xmlResponse.Body.GetUKLocationByPostCodeResponse.GetUKLocationByPostCodeResult.toString())

	log.info(slurperResponse)


for(int i = 0; i  &lt; slurperResponse.Table.size(); i++)
{
	if ( slurperResponse.Table.Town[i] == "Clifton") 
	{
		def UKTown = slurperResponse.Table.Town[i]
		log.info("Townname :" +" " +  UKTown + " on index: " + i)
		testRunner.testCase.testSuite.project.setPropertyValue("UKTown_projectLevel", UKTown.toString())
	}
}
	</script></con:config></con:testStep><con:testStep type="request" name="GetUKLocationByTown" id="7ff34e8f-d0b3-4f68-acd7-5ca7b6e5f278"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>UKLocationSoap</con:interface><con:operation>GetUKLocationByTown</con:operation><con:request name="GetUKLocationByTown" id="2e5a7c8c-ac7b-4e3e-a799-5f8cd1a790bd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:GetUKLocationByTown>
         <web:Town>${#Project#UKTown_projectLevel}</web:Town>
      </web:GetUKLocationByTown>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8c1a7ebf-ec69-4bf3-9642-601065a24be0"/><con:assertion type="Valid HTTP Status Codes" id="5ed7d962-853a-4339-a10b-3fa4711af1bc" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0d4f4604-f7e5-43be-9043-600637bd6bb2" name="Contains"><con:configuration><token>Clifton</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="ValidateUKAddress_GlobalLevel" id="e0c286f5-8d75-4d9d-9d73-7aa3435d9a1c"><con:settings/><con:config><script>	import groovy.util.XmlSlurper

	def responseContent = testRunner.testCase.getTestStepByName("GetUKLocationByTown").getPropertyValue("response")
	log.info(responseContent)

	def xmlResponse = new XmlSlurper().parseText(responseContent)
	def slurperResponse = new XmlSlurper().parseText(xmlResponse.Body.GetUKLocationByTownResponse.GetUKLocationByTownResult.toString())

	log.info(slurperResponse)


//Get Townname
for(int i = 0; i  &lt; slurperResponse.Table.size(); i++)
{
	if ( slurperResponse.Table.Town[i] == "Clifton") 
	{
		def UKTown = slurperResponse.Table.Town[i]
		log.info("Townname :" +" " +  UKTown + " on index: " + i)
		com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("UKTown_Global", UKTown.toString())
	}
}

//Get County name
for(int i = 0; i  &lt; slurperResponse.Table.size(); i++)
{
	if ( slurperResponse.Table.County[i] == "Bedfordshire") 
	{
		def UKCounty = slurperResponse.Table.County[i]
		log.info("UKCounty :" +" " +  UKCounty + " on index: " + i)
		com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("UKCounty_Global", UKCounty.toString())
	}
}

//Get postcode
for(int i = 0; i  &lt; slurperResponse.Table.size(); i++)
{
	if ( slurperResponse.Table.PostCode[i] == "SG17") 
	{
		def UKPostCode = slurperResponse.Table.PostCode[i]
		log.info("UKPostCode :" +" " +  UKPostCode + " on index: " + i)
		com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("UKPostCode_Global", UKPostCode.toString())
	}
}

	
/*
	assert slurperResponse.Table.Town[0] == "Clifton"
	assert slurperResponse.Table.County[0] == "Bedfordshire"
	assert slurperResponse.Table.PostCode[0] == "SG17"

	def UKTown = slurperResponse.Table.Town[0]
	def UKCounty = slurperResponse.Table.County[0]
	def UKPostCode = slurperResponse.Table.PostCode[0]

	log.info("UKTownyName :" + " " +  UKTown)
	log.info("UKCounty :" + " " +  UKCounty)
	log.info("UKPostCode :" + " " +  UKPostCode)

	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("UKTown_Global", UKTown.toString())
	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("UKCounty_Global", UKCounty.toString())
	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("UKPostCode_Global", UKPostCode.toString())
	*/
	</script></con:config></con:testStep><con:testStep type="request" name="ValidateUKAdress" id="eb19535b-3893-4a2d-bcac-c7dd0119c499"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>UKLocationSoap</con:interface><con:operation>ValidateUKAddress</con:operation><con:request name="ValidateUKAdress" id="d3e448db-f8a8-43bc-93c2-5157b1785d2b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.webservicex.net/uklocation.asmx</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://www.webserviceX.NET">
   <soapenv:Header/>
   <soapenv:Body>
      <web:ValidateUKAddress>

         <web:Town>${UKTown_Global}</web:Town>

         <web:County>${UKCounty_Global}</web:County>

         <web:PostCode>${UKPostCode_Global}</web:PostCode>
      </web:ValidateUKAddress>
   </soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="4fde0121-82aa-4ef8-b989-65210081f64e"/><con:assertion type="Valid HTTP Status Codes" id="38a2dbdb-670d-420e-a456-a472097a5068" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bd3f24f6-357f-4e8b-a8e6-5f5354e9ddd7" name="Contains ${UKTown_Global}"><con:configuration><token>${UKTown_Global}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d75580e1-1137-4b17-a608-9adb1cfc6fe5" name="Contains ${UKCounty_Global}"><con:configuration><token>${UKCounty_Global}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b59e47b-bde7-4e6f-b589-dd22ab4673d3" name="Contains ${UKPostCode_Global}"><con:configuration><token>${UKPostCode_Global}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>UKTown_projectLevel</con:name><con:value>Clifton</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>